<script src = "/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
	var socket;
	var username;
	var divs = [];
	
	window.onload = init;
	
	function init(){
		
		document.querySelector("#connect").addEventListener('click',connectSocket);
	}
	
	function connectSocket(e){

		socket = io.connect();
		
		username = document.querySelector("#username").value;
		
		socket.on('connect',function(data){
			
			if(!username){
				username = "Unknown";
			}
			
			console.log("Connected");
			
			socket.emit('join',{name:username});
			setInterval(updateScore,2000);
		});
		
		socket.on('countUpdate',function(data){
			console.log("Updating count " + data.serverNumber);
			document.querySelector("#numberCount").innerHTML = data.serverNumber;
			document.querySelector("#counter").innerHTML = "<section>Hi</section>";
		});
	}
	
	function updateScore(){
		var num = Math.random() * 100;
		
		socket.emit('addToCount', {name:username,count:num});
	}
</script>

<html lang="en">
	<head>
		<style>
			#counter{
				margin: 0 auto;
    			width: 270px;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<section id = "login">
			<label for="user">Username:</label>
			<input id = "username" name="user" type = "text"/>
			<input id = "connect" type="button" value = "Join Counter"/>
		</section>
		<section id = "counter">
			<p>Counter:</p>
			<p id = "numberCount">0</p>
		</section>
	</body>
</html>